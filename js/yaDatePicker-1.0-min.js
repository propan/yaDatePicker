(function(c){var d=["January","February","March","April","May","June","July","August","September","October","November","December"];var b=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];var f="←";var k="→";function m(p,s){var n=p.getMonth();var t=p.getDate();var u=p.getFullYear();var r=s.split(""),o;for(var q=0;q<r.length;q++){o=r[q];switch(r[q]){case"d":o=(t<10)?("0"+t):t;break;case"m":o=(n<9)?("0"+(1+n)):(1+n);break;case"y":o=(""+u).substr(2,2);break;case"Y":o=u;break}r[q]=o}return r.join("")}function i(n,o){var p=new Date(n.getFullYear(),n.getMonth()+o,0);return p>new Date()}function l(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())}function a(o){var n=[];for(var p=0;p<b.length;p++){if(p>o){n.unshift(b[p])}else{n.push(b[p])}}return n}function j(n){c("#"+n.id).slideDown(200);c(".dp").not(".inline").not("#"+n.id).slideUp(200)}function e(n){c("#"+n.id).slideUp(200)}function h(o){var E=new Date();var A=o.currentDate.getMonth();var z=a(o.firstDay);var q="";for(var C=0;C<7;C++){q+='<td class="@@-cell">'+z[C]+"</td>"}var p='<tr class="@@-days">'+q+"</tr>";var n=new Date(o.currentDate);n.setDate(0);n.setDate(n.getDate()+o.firstDay-n.getDay()+1);if(n.getMonth()==A){n.setDate(n.getDate()-7)}var s,t,D,r;for(var u=0,F=0;u<6;u++){q="";for(C=0;C<7;C++){var G=n.getDate();var B=n.getDay();s=(n.getMonth()==A)?" @@-on-month":" @@-off-month";t=(B==0||B==6)?" @@-weekend":"";D=((!o.allowPast&&n<=E)||(o.endDate!=-1&&n>o.endDate))?" @@-no-day":" @@-yes-day";r=n.getTime()==o.selectedDate.getTime()?" @@-selected-day":"";n.setDate(n.getDate()+1);q+='<td class="@@-cell'+s+t+D+r+'">'+G+"</td>"}p+='<tr class="@@-week">'+q+"</tr>"}var v="";if(o.navigation){var x='<div class="@@-prev-link">'+f+"</div>";var y='<div class="@@-next-link">'+k+"</div>";if(!o.allowPast&&!i(o.currentDate,0)){x=""}if(o.endDate!=-1&&o.endDate.getMonth()==A){y=""}v='<tr class="@@-links"><td colspan="1">'+x+'</td><td colspan="5"><div class="@@-current">'+d[o.currentDate.getMonth()]+" "+o.currentDate.getFullYear()+'</div></td><td colspan="1">'+y+"</td></tr>"}return('<table cellpadding="0" cellspacing="0">'+v+p+"</table>").replace(/@{2}/gi,o.theme)}function g(r,o){if(!o.allowPast){if(!i(o.currentDate,1)){var n=new Date(o.currentDate);n.setMonth(n.getMonth()+1);o.currentDate=n}}var p=h(o);var q=c("#"+o.id);if(q.length==0){q=c('<div id="'+o.id+'" class="'+o.theme+'"/>');if(o.inline){r.empty().append(q.addClass("inline"))}else{r.after(q.css({position:"absolute",display:"none",left:(r.offset().left),top:r.offset().top+r.outerHeight(false)}))}}q.html(p);c("."+o.theme+"-links [class*=-link]",q).hover(function(){c(this).addClass(o.theme+"-link-hover")},function(){c(this).removeClass(o.theme+"-link-hover")}).click(function(t){t.stopPropagation();var s=new Date(o.currentDate);s.setMonth(s.getMonth()+(c(this).attr("class").indexOf("-prev-link")!=-1?-1:1));o.currentDate=s;g(r,o)});c("."+o.theme+"-yes-day",q).hover(function(){c(this).addClass(o.theme+"-cell-hover")},function(){c(this).removeClass(o.theme+"-cell-hover")}).click(function(){var t=c(this);var u=t.html();var s=new Date(o.currentDate);if(t.hasClass(o.theme+"-off-month")){s.setMonth(s.getMonth()+(u>15?-1:1))}s.setDate(u);o.currentDate=s;o.selectedDate=s;if(!o.inline){r.val(m(s,o.format));e(o)}g(r,o);if(o.onSelect){o.onSelect(s)}})}c.fn.attachDatePicker=function(n){return this.each(function(){var t=c(this);var p=l(new Date());var q=c.extend({},{inline:false,firstDay:0,navigation:true,allowPast:true,endDate:-1,theme:"dp",format:"d.m.Y",onSelect:function(u){}},n);q.id="dp-"+c("div[id^=dp-]").length;q.currentDate=p;q.selectedDate=q.currentDate;if(q.endDate!=-1){if(typeof q.endDate=="number"){var s=new Date(p);s.setDate(s.getDate()+q.endDate);q.endDate=s}else{if(!(q.endDate instanceof Date)){q.endDate=-1}}}if(!q.allowPast){q.selectedDate.setDate(q.selectedDate.getDate()+1)}g(t,q);if(!q.inline){var r=function(u){u.stopPropagation();j(q)};var o=function(u){u.stopPropagation();e(q)};t.focus(r).click(r);c(document).click(o)}})}})(jQuery);