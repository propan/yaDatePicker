(function(c){var d=["January","February","March","April","May","June","July","August","September","October","November","December"];var b=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];var f="←";var j="→";function l(p,s){var n=p.getMonth();var t=p.getDate();var u=p.getFullYear();var r=s.split(""),o;for(var q=0;q<r.length;q++){o=r[q];switch(r[q]){case"d":o=(t<10)?("0"+t):t;break;case"m":o=(n<9)?("0"+(1+n)):(1+n);break;case"y":o=(""+u).substr(2,2);break;case"Y":o=u;break}r[q]=o}return r.join("")}function i(m,n){return new Date(m.getFullYear(),m.getMonth()+n,0)>new Date()}function k(m){return new Date(m.getFullYear(),m.getMonth(),m.getDate())}function a(n){var m=[];for(var o=0;o<b.length;o++){if(o>n){m.unshift(b[o])}else{m.push(b[o])}}return m}function e(m){c("#"+m.id).slideUp(200)}function h(n){var D=new Date();var z=n.currentDate.getMonth();var y=a(n.firstDay);var p="";for(var B=0;B<7;B++){p+='<td class="@@-cell">'+y[B]+"</td>"}var o='<tr class="@@-days">'+p+"</tr>";var m=new Date(n.currentDate);m.setDate(0);m.setDate(m.getDate()+n.firstDay-m.getDay()+1);if(m.getMonth()==z){m.setDate(m.getDate()-7)}var r,s,C,q;for(var t=0,E=0;t<6;t++){p="";for(B=0;B<7;B++){var F=m.getDate();var A=m.getDay();r=(m.getMonth()==z)?" @@-on-month":" @@-off-month";s=(A==0||A==6)?" @@-weekend":"";C=((!n.allowPast&&m<=D)||(n.endDate!=-1&&m>n.endDate))?" @@-no-day":" @@-yes-day";q=m.getTime()==n.selectedDate.getTime()?" @@-selected-day":"";m.setDate(m.getDate()+1);p+='<td class="@@-cell'+r+s+C+q+'">'+F+"</td>"}o+='<tr class="@@-week">'+p+"</tr>"}var u="";if(n.navigation){var v='<div class="@@-prev-link">'+f+"</div>";var x='<div class="@@-next-link">'+j+"</div>";if(!n.allowPast&&!i(n.currentDate,0)){v=""}if(n.endDate!=-1&&n.endDate.getMonth()==z){x=""}u='<tr class="@@-links"><td colspan="1">'+v+'</td><td colspan="5"><div class="@@-current">'+d[n.currentDate.getMonth()]+" "+n.currentDate.getFullYear()+'</div></td><td colspan="1">'+x+"</td></tr>"}return('<table cellpadding="0" cellspacing="0">'+u+o+"</table>").replace(/@{2}/gi,n.theme)}function g(q,n){if(!n.allowPast){if(!i(n.currentDate,1)){var m=new Date(n.currentDate);m.setMonth(m.getMonth()+1);n.currentDate=m}}var o=h(n);var p=c("#"+n.id);if(p.length==0){p=c('<div id="'+n.id+'" class="'+n.theme+'"/>');if(n.inline){q.empty().append(p.addClass("inline"))}else{q.after(p.css({position:"absolute",display:"none"}))}}p.html(o);c("."+n.theme+"-links [class*=-link]",p).hover(function(){c(this).addClass(n.theme+"-link-hover")},function(){c(this).removeClass(n.theme+"-link-hover")}).click(function(s){s.stopPropagation();var r=new Date(n.currentDate);r.setMonth(r.getMonth()+(c(this).attr("class").indexOf("-prev-link")!=-1?-1:1));n.currentDate=r;g(q,n)});c("."+n.theme+"-yes-day",p).hover(function(){c(this).addClass(n.theme+"-cell-hover")},function(){c(this).removeClass(n.theme+"-cell-hover")}).click(function(){var s=c(this);var t=s.html();var r=new Date(n.currentDate);if(s.hasClass(n.theme+"-off-month")){r.setMonth(r.getMonth()+(t>15?-1:1))}r.setDate(t);n.currentDate=r;n.selectedDate=r;if(!n.inline){q.val(l(r,n.format));e(n)}g(q,n);if(n.onSelect){n.onSelect(r)}})}c.fn.attachDatePicker=function(m){return this.each(function(){var t=c(this);var p=k(new Date());var q=c.extend({},{inline:false,firstDay:0,navigation:true,allowPast:true,endDate:-1,theme:"dp",format:"d.m.Y",onSelect:function(u){}},m);q.id="dp-"+c("div[id^=dp-]").length;q.currentDate=p;q.selectedDate=p;if(!q.allowPast){q.selectedDate.setDate(p.getDate()+1)}var o=q.endDate;if(o!=-1){if(typeof o=="number"){var s=new Date(p);s.setDate(s.getDate()+o);q.endDate=s}else{if(!(o instanceof Date)){q.endDate=-1}}}g(t,q);if(!q.inline){var r=function(u){u.stopPropagation();c("#"+q.id).css({left:t.offset().left,top:t.offset().top+t.outerHeight(false)}).slideDown(200);c("div[id^=dp-]").not(".inline").not("#"+q.id).slideUp(200)};var n=function(u){u.stopPropagation();e(q)};t.focus(r).click(r);c(document).click(n)}})}})(jQuery);