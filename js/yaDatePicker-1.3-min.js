(function(c){c.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];c.daysNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];c.prevLink="←";c.nextLink="→";var b=0;function j(n,q){var k=n.getMonth();var r=n.getDate();var s=n.getFullYear();var p=q.split(""),l;for(var o=0;o<p.length;o++){l=p[o];switch(p[o]){case"d":l=(r<10)?("0"+r):r;break;case"m":l=(k<9)?("0"+(1+k)):(1+k);break;case"y":l=(""+s).substr(2,2);break;case"Y":l=s;break}p[o]=l}return p.join("")}function f(k,l){return new Date(k.getFullYear(),k.getMonth()+l,0)>new Date()}function i(k){return new Date(k.getFullYear(),k.getMonth(),k.getDate())}function a(l){var k=[];var n=c.daysNames;for(var m=n.length-1;m>=0;m--){if(m>=l){k.unshift(n[m])}else{k.push(n[m])}}return k}function d(k){c("#"+k.id).slideUp(200)}function g(l){var B=new Date();var x=l.currentDate.getMonth();var v=a(l.firstDay);var n="";for(var z=0;z<7;z++){n+='<td class="@@-cell">'+v[z]+"</td>"}var m='<tr class="@@-days">'+n+"</tr>";var k=new Date(l.currentDate);k.setDate(0);k.setDate(k.getDate()+l.firstDay-k.getDay());if(k.getMonth()==x){k.setDate(k.getDate()-7)}var p,q,A,o;for(var r=0;r<6;r++){n="";for(z=0;z<7;z++){var C=k.getDate();var y=k.getDay();p=(k.getMonth()==x)?" @@-on-month":" @@-off-month";q=(y==0||y==6)?" @@-weekend":"";A=((!l.allowPast&&k<=B)||(l.endDate!=-1&&k>l.endDate))?" @@-no-day":" @@-yes-day";o=k.getTime()==l.selectedDate.getTime()?" @@-selected-day":"";k.setDate(k.getDate()+1);n+='<td class="@@-cell'+p+q+A+o+'">'+C+"</td>"}m+='<tr class="@@-week">'+n+"</tr>"}var s="";if(l.navigation){var t='<div class="@@-prev-link">'+c.prevLink+"</div>";var u='<div class="@@-next-link">'+c.nextLink+"</div>";if(!l.allowPast&&!f(l.currentDate,0)){t=""}if(l.endDate!=-1&&l.endDate.getMonth()==x){u=""}s='<tr class="@@-links"><td colspan="1">'+t+'</td><td colspan="5"><div class="@@-current">'+c.monthNames[l.currentDate.getMonth()]+" "+l.currentDate.getFullYear()+'</div></td><td colspan="1">'+u+"</td></tr>"}return('<table cellpadding="0" cellspacing="0">'+s+m+"</table>").replace(/@{2}/gi,l.theme)}function e(o,l){if(!l.allowPast){if(!f(l.currentDate,1)){var k=new Date(l.currentDate);k.setMonth(k.getMonth()+1);l.currentDate=k}}var m=g(l);var n=c("#"+l.id);if(n.length==0){n=c('<div id="'+l.id+'" class="'+l.theme+'"/>');if(l.inline){o.empty().append(n.addClass("inline"))}else{o.after(n.css({position:"absolute",display:"none"}))}}n.html(m);c("."+l.theme+"-links [class*=-link]",n).hover(function(){c(this).addClass(l.theme+"-link-hover")},function(){c(this).removeClass(l.theme+"-link-hover")}).click(function(q){q.stopPropagation();var p=new Date(l.currentDate);p.setMonth(p.getMonth()+(c(this).attr("class").indexOf("-prev-link")!=-1?-1:1));l.currentDate=p;e(o,l)});c("."+l.theme+"-yes-day",n).hover(function(){c(this).addClass(l.theme+"-cell-hover")},function(){c(this).removeClass(l.theme+"-cell-hover")}).click(function(){var q=c(this);var r=q.html();var p=new Date(l.currentDate);if(q.hasClass(l.theme+"-off-month")){p.setDate(1);p.setMonth(p.getMonth()+(r>15?-1:1))}p.setDate(r);l.currentDate=p;l.selectedDate=p;if(l.onSelect){l.onSelect(p)}else{if(!l.inline){o.val(j(p,l.format))}}if(!l.inline){d(l)}e(o,l)})}function h(l,t){var o=c(l);var q=i(new Date());var k=c.extend({},{inline:false,firstDay:0,navigation:true,allowPast:true,endDate:-1,theme:"dp",format:"d.m.Y",initial:-1,onSelect:null},t);k.id="dp-"+b++;var p=k.initial;if(p!=-1){if(typeof p=="string"){try{p=new Date(p)}finally{}}}if(Object.prototype.toString.call(p)!=="[object Date]"||isNaN(p.getTime())){p=q}k.currentDate=p;k.selectedDate=p;if(!k.allowPast){k.selectedDate.setDate(p.getDate()+1)}var r=k.endDate;if(r!=-1){if(typeof r=="number"){var m=new Date(p);m.setDate(m.getDate()+r);k.endDate=m}else{if(!(r instanceof Date)){k.endDate=-1}}}e(o,k);if(!k.inline){var s=function(u){u.stopPropagation();c("#"+k.id).css({left:o.offset().left,top:o.offset().top+o.outerHeight(false)}).slideDown(200);c("div[id^=dp-]").not(".inline").not("#"+k.id).slideUp(200)};var n=function(u){u.stopPropagation();d(k)};o.focus(s).click(s);c(document).click(n)}return{setDate:function(u){k.currentDate=u;k.selectedDate=u;e(o,k);if(k.onSelect){k.onSelect(u)}}}}c.fn.attachDatePicker=function(k){return c(this).map(function(l,m){return h(m,k)})}})(jQuery);